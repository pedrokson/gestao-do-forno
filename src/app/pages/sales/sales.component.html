<div class="container mt-4">
  <!-- Formul치rio de Registro de Vendas -->
  <div
    class="card shadow-lg p-4"
    style="border-radius: 15px; background-color: #f8f9fa"
  >
    <h2 class="text-center mb-4" style="color: #343a40; font-weight: bold;">
      Registro de Vendas
    </h2>

    <form (ngSubmit)="registrarVenda()" class="mb-4">
      <div class="row g-3">
        <div class="col-md-6">
          <label for="produto" class="form-label fw-bold">Produto</label>
          <select
            [(ngModel)]="produto_id"
            name="produto_id"
            id="produto"
            class="form-select"
            required
          >
            <option value="" disabled [selected]="!produto_id">
              Selecione um produto
            </option>
            <option *ngFor="let p of produtos" [value]="p.id">
              {{ p.nome }}
            </option>
          </select>
        </div>

        <div class="col-md-6">
          <label for="vendedor" class="form-label fw-bold">Vendedor</label>
          <select
            [(ngModel)]="vendedor_id"
            name="vendedor_id"
            id="vendedor"
            class="form-select"
            required
          >
            <option value="" disabled [selected]="!vendedor_id">
              Selecione um vendedor
            </option>
            <option *ngFor="let u of usuarios" [value]="u.id">
              {{ u.nome }}
            </option>
          </select>
        </div>
      </div>

      <div class="row g-3 mt-3">
        <div class="col-md-4">
          <label for="quantidade" class="form-label fw-bold">Quantidade</label>
          <input
            [(ngModel)]="quantidade"
            name="quantidade"
            id="quantidade"
            type="number"
            class="form-control"
            placeholder="Quantidade"
            min="1"
            required
          />
        </div>

        <div class="col-md-4">
          <label for="data" class="form-label fw-bold">Data</label>
          <input
            [(ngModel)]="data"
            name="data"
            id="data"
            type="date"
            class="form-control"
            required
          />
        </div>

        <div class="col-md-4 d-flex align-items-end">
          <button
            class="btn btn-primary btn-lg w-100"
            type="submit"
            style="border-radius: 10px"
          >
            Registrar
          </button>
        </div>
      </div>
    </form>

    <div *ngIf="mensagem" class="alert alert-info text-center">
      {{ mensagem }}
    </div>
  </div>

  <!-- Hist칩rico de Vendas -->
  <div
    class="card shadow-lg mt-4 p-4"
    style="border-radius: 15px; background-color: #ffffff"
  >
    <h4 class="text-center mb-4" style="color: #343a40; font-weight: bold;">
      Hist칩rico de Vendas
    </h4>
    <table
      class="table table-hover table-bordered table-striped"
      *ngIf="vendas?.length && vendas.length > 0"
    >
      <thead class="table-dark text-center">
        <tr>
          <th>Produto</th>
          <th>Quantidade</th>
          <th>Valor Unit치rio</th>
          <th>Valor Total</th>
          <th>Data</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let v of vendas" class="align-middle text-center">
          <td>{{ getNomeProduto(v.produtoId) }}</td>
          <td>{{ v.quantidade }}</td>
          <td>{{ getPrecoProduto(v.produtoId) | number : "1.2-2" }}</td>
          <td>{{ v.valorTotal | currency : "BRL" }}</td>
          <td>{{ v.dataVenda | date : "dd/MM/yyyy" }}</td>
        </tr>
      </tbody>
    </table>
    <div *ngIf="vendas?.length === 0" class="alert alert-warning text-center">
      Nenhuma venda registrada.
    </div>
  </div>
</div>